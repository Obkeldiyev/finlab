generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
    id           String    @id @default(cuid())
    email        String?   @unique
    first_name   String
    last_name    String
    middle_name  String?
    phone_number String    @unique
    status       String    @default("PENDING")
    course_id    Int?
    direction_id Int?
    address      String?
    workplace    String?
    position     String?
    created_at   DateTime  @default(now())
    course       Courses?  @relation(fields: [course_id], references: [id])
    direction    direction? @relation(fields: [direction_id], references: [id])
    role         String    @default("USER")
}

model Admin {
    id       String @id @default(cuid())
    username String @unique
    password String
    role     String @default("ADMIN")
}

model News {
    id           Int      @id @default(autoincrement())
    title_en     String
    title_ru     String
    title_uz     String
    content_en   String
    content_ru   String
    content_uz   String
    published_at DateTime @default(now())
    medias       newsMedia[]
}

model newsMedia {
    id     Int    @id @default(autoincrement())
    url    String
    type   String
    news   News   @relation(fields: [newsId], references: [id])
    newsId Int
}

model elon {
    id           Int         @id @default(autoincrement())
    title_en     String
    title_ru     String
    title_uz     String
    content_en   String
    content_ru   String
    content_uz   String
    published_at DateTime    @default(now())
    ends_at      DateTime
    medias       elonMedia[]
}

model elonMedia {
    id     Int    @id @default(autoincrement())
    url    String
    type   String
    elon   elon   @relation(fields: [elonId], references: [id])
    elonId Int
}

model Courses {
    id             Int    @id @default(autoincrement())
    title_en       String
    title_ru       String
    title_uz       String
    description_en String
    description_ru String
    description_uz String
    published_at   DateTime @default(now())
    start_date     DateTime
    ends_at        DateTime
    direction_id   Int
    direction      direction @relation(fields: [direction_id], references: [id])
    users          User[]
}

model direction {
    id             Int    @id @default(autoincrement())
    title_en       String
    title_ru       String
    title_uz       String
    description_en String
    description_ru String
    description_uz String
    published_at   DateTime @default(now())
    ends_at        DateTime
    courses        Courses[]
    users          User[]
}
